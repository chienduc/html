CKEDITOR.plugins.add('smallerselection',{init:function(editor){editor.on('contentDom',function(){editor.document.on('dblclick',function(event){var sel=editor.getSelection(),range=sel&&sel.getRanges()[0],custom=false;if(range.startContainer&&range.endContainer&&!range.startContainer.equals(range.endContainer)&&range.startContainer.type==CKEDITOR.NODE_TEXT){var start=range.startContainer,startOffset=range.startOffset,end=range.endContainer,endOffset=range.endOffset,startText=start.getText();if(startOffset==startText.length){start=start.getNextSourceNode(false,CKEDITOR.NODE_TEXT);startOffset=0}if(end.type==CKEDITOR.NODE_TEXT&&endOffset==0){end=end.getPreviousSourceNode(false,CKEDITOR.NODE_TEXT);endOffset=end.getText().length}if(end.type==CKEDITOR.NODE_ELEMENT){end=end.getChild(endOffset);end=end.getPreviousSourceNode(true,CKEDITOR.NODE_TEXT);endOffset=end.getText().length}if(!range.startContainer.equals(start)||!range.endContainer.equals(end)){range.startContainer=start;range.endContainer=end;range.startOffset=startOffset;range.endOffset=endOffset;custom=true}}if(range.endContainer.type==CKEDITOR.NODE_TEXT&&range.endOffset>0&&range.endContainer.getText().substr(range.endOffset-1,1)==' '){range.endOffset-=1;custom=true}if(custom)range.select()})})}});