
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" itemscope itemtype="http://schema.org/Product">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Checkout</title>
<meta name="description" content="Castlery is an online furniture store in Singapore that provides a wide range of modern and high-quality furniture. We produce furniture with great aesthetics at a competitive price point." />
<meta name="keywords" content="furniture singapore,online furniture singapore,furniture online singapore,furniture shop singapore,furniture stores singapore,furniture in singapore,modern furniture singapore,Furniture SG,singapore furniture
" />
<meta name="robots" content="INDEX,FOLLOW" />
<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1" />

<meta property="fb:app_id" content="452677454839601" />
<meta property="fb:page_id" content="374586035998186" />

<link rel="apple-touch-icon" sizes="57x57" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon//apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/favicon-16x16.png">
<link rel="manifest" href="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="https://www.castlery.com/skin/frontend/castlery/default/images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


<script>
    (function(_,e,rr,s){_errs=[s];var c=_.onerror;_.onerror=function(){var a=arguments;_errs.push(a);
        c&&c.apply(this,a)};var b=function(){var c=e.createElement(rr),b=e.getElementsByTagName(rr)[0];
        c.src="//beacon.errorception.com/"+s+".js";c.async=!0;b.parentNode.insertBefore(c,b)};
        _.addEventListener?_.addEventListener("load",b,!1):_.attachEvent("onload",b)})
    (window,document,"script","55681d30e142f4c7130008e9");
</script>

<script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
    heap.load("3780825033");
</script>

<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:198284,hjsv:5};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');
</script>


<script type='text/javascript' src="//wurfl.io/wurfl.js"></script>

<script type="text/javascript">
    if(WURFL.is_mobile){
        // Mobile or tablet
        if (WURFL.form_factor == "Tablet") {
            // Tablet
            window.siteType = "t";
        } else {
            // Mobile
            window.siteType = "m";
        }
    } else { // set siteType to Desktop otherwise
        window.siteType = "d";
    }
</script>

<!-- criteo integration start -->
<script type="text/javascript" src="//static.criteo.net/js/ld/ld.js" async="true"></script>
<!-- criteo intgration end -->


<link rel="stylesheet" type="text/css" href="https://www.castlery.com/media/css_secure/a3a1af861151ba9c050252d234506ab3.css" media="all" />
<link rel="stylesheet" type="text/css" href="https://www.castlery.com/media/css_secure/01ff5530feac6b07b69ca07fe73bd823.css" media="print" />
<script type="text/javascript" src="https://www.castlery.com/media/js/43ade9b93e4f24b86a927f0bf5997ec2.js"></script>
<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="https://www.castlery.com/media/css_secure/6b0d0827ccbacac30ba84c3269c4e698.css" media="all" />
<script type="text/javascript" src="https://www.castlery.com/media/js/5239f5810c0239ec7cdfefeac337075f.js"></script>
<![endif]-->
<!--[if lt IE 7]>
<script type="text/javascript" src="https://www.castlery.com/media/js/6b9cc6b0a215004d78fc1808e41560de.js"></script>
<![endif]-->

<script type="text/javascript">
//<![CDATA[
Mage.Cookies.path     = '/';
Mage.Cookies.domain   = '.www.castlery.com';
var CSLR = CSLR || {};
CSLR.skin_url = 'https://www.castlery.com/skin/frontend/castlery/default/';
CSLR.base_url = 'https://www.castlery.com/';
CSLR.user_id = 23832;
CSLR.is_loggedin = true;
//]]>
</script>


<script type="text/javascript">
//<![CDATA[
optionalZipCountries = ["HK","IE","MO","PA"];
//]]>
</script>
            <!-- BEGIN GOOGLE UNIVERSAL ANALYTICS CODE -->
        <script type="text/javascript">
        //<![CDATA[
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            
ga('create', 'UA-42655755-1', 'auto');

ga('send', 'pageview');
            
        //]]>
        </script>
        <!-- END GOOGLE UNIVERSAL ANALYTICS CODE -->
            <script type="text/javascript">
        //<![CDATA[
            try {
                Prototype && Prototype.Version && Event && Event.observe && Event.observe(window, 'load', function()
                {
                    if ($$('input#search').length) {
                        $$('input#search')[0].stopObserving('keydown');
                    }
                });
            } catch (e) {}
        //]]>
        </script>
        <script type="text/javascript">
            //<![CDATA[
                Searchanise = {};
                Searchanise.host        = 'http://www.searchanise.com';
                Searchanise.api_key     = '7C8r7e1I5k';
                Searchanise.SearchInput = '#search';
                
                Searchanise.AutoCmpParams = {};
                Searchanise.AutoCmpParams.union = {}; Searchanise.AutoCmpParams.union.price = {}; Searchanise.AutoCmpParams.union.price.min = 'se_price_7';
                Searchanise.AutoCmpParams.restrictBy = {};
                Searchanise.AutoCmpParams.restrictBy.status = '1';
                Searchanise.AutoCmpParams.restrictBy.visibility = '4';
                Searchanise.AutoCmpParams.restrictBy.is_in_stock = '1';Searchanise.AutoCmpParams.restrictBy.tag_ids = '!33';
                
                Searchanise.options = {};
                Searchanise.AdditionalSearchInputs = '#name,#description,#sku';

                Searchanise.options.PriceFormat = {
                    decimals_separator:  '.',
                    thousands_separator: ',',
                    symbol:              '$',

                    decimals: '2',
                    rate:     '1',
                    after:     false
                };
                
                (function() {
                    var __se = document.createElement('script');
                    __se.src = 'https://www.searchanise.com/widgets/v1.0/init.js';
                    __se.setAttribute('async', 'true');
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(__se, s);
                })();
            //]]>
        </script>
        <meta name="viewport" content="initial-scale=1.0, width=device-width" />
<script type="text/javascript">//<![CDATA[
        var Translator = new Translate([]);
        //]]></script></head>
<body class=" checkout-onepage-index">
                    <!-- Facebook Pixel Code -->
        <script>
            !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
            n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
            document,'script','//connect.facebook.net/en_US/fbevents.js');

            fbq('init', '784173511661404');
            fbq('track', "PageView");
        </script>
        <noscript><img height="1" width="1" style="display:none"
        src="https://www.facebook.com/tr?id=784173511661404&ev=PageView&noscript=1"
        /></noscript>
        <!-- End Facebook Pixel Code -->
    
    
    
    
    

<script>dataLayer = [{"visitorId":"23832","visitorLoginState":"Logged in","visitorType":"Online Customer","visitorLifetimeValue":0,"visitorExistingCustomer":"No"}];</script>


<!-- Google Tag Manager -->

<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MXKX67" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MXKX67');</script>

<!-- End Google Tag Manager -->
<div class="wrapper">
        <noscript>
        <div class="global-site-notice noscript">
            <div class="notice-inner">
                <p>
                    <strong>JavaScript seems to be disabled in your browser.</strong><br />
                    You must have JavaScript enabled in your browser to utilize the functionality of this website.                </p>
            </div>
        </div>
    </noscript>
<div class="header-notification alert alert-dismissable fade in" role="alert">
    <div class="notice-text">3rd Anniversary with Gifts & Rebates! <a href="https://www.castlery.com/3-year-anniversary" class="header-notification__link">Shop Now ></a></div>
    <a class="close-notification" data-dismiss="alert" aria-label="Close">X</a>
</div>
    <div>
        <div class="header-container">
    <div class="header cslr-checkout">
        <div class="header-content">
            <div class="cslr-logo">
                                    <a href="https://www.castlery.com/" title="Castlery"
                       class="logo"><strong>Castlery</strong><img
                            src="https://www.castlery.com/skin/frontend/castlery/default/images/logo.png" alt="Castlery"/></a>
                                </div>
            </div>
        </div>
    </div>
</div>



                <div class="ma-main-container col2-right-layout">
            <div class="">
                <div class="container-inner">
                    <div class="main">
                                                <div class="main-inner">
                            <div class="container cart">

                                <div class="col-main cart-left col-lg-9 col-md-9 col-sm-12 col-xs-12">
                                                                        <!-- <div class="page-title">
    <h1>Checkout</h1>
</div> -->
<script type="text/javascript" src="https://www.castlery.com/js/varien/accordion.js"></script>
<script type="text/javascript" src="https://www.castlery.com/skin/frontend/castlery/default/js/opcheckout.js"></script>
<ol class="opc" id="checkoutSteps">
    <li id="opc-billing" class="section allow">
        <div class="step-title">
            <span class="number">1.</span>
            <h2>Billing Information</h2>
            <a href="javascript:;">Edit</a>
        </div>
        <div id="checkout-step-billing" class="step a-item" style="display:none;">
            <form id="co-billing-form" action="">
<fieldset>
    <ul class="form-list">
        <li id="billing-new-address-form">
        <fieldset>
            <input type="hidden" name="billing[address_id]" value="125798" id="billing:address_id" />
            <ul>
                <li class="fields"><div class="customer-name">
    <div class="field name-firstname">
        <label for="billing:firstname" class="required"><em>*</em>First Name</label>
        <div class="input-box">
            <input type="text" id="billing:firstname" name="billing[firstname]" value="Chien" title="First Name" maxlength="255" class="input-text required-entry"  />
        </div>
    </div>
    <div class="field name-lastname">
        <label for="billing:lastname" class="required"><em>*</em>Last Name</label>
        <div class="input-box">
            <input type="text" id="billing:lastname" name="billing[lastname]" value="Nguyen Duc" title="Last Name" maxlength="255" class="input-text required-entry"  />
        </div>
    </div>
</div>
</li>
                <li class="fields">
                    <div class="field">
                        <label for="billing:company">Company</label>
                        <div class="input-box">
                            <input type="text" id="billing:company" name="billing[company]" value="mor" title="Company" class="input-text " />
                        </div>
                    </div>
                        </li>
                        <li class="wide">
                    <label for="billing:street1" class="required"><em>*</em>Address</label>
                    <div class="input-box">
                        <input type="text" title="Street Address" name="billing[street][]" id="billing:street1" value="123" class="input-text  required-entry" />
                    </div>
                </li>
                                <li class="wide">
                    <div class="input-box">
                        <input type="text" title="Street Address 2" name="billing[street][]" id="billing:street2" value="" class="input-text " />
                    </div>
                </li>
                                        <li class="fields">
                    <div class="field">
                        <label for="billing:city" class="required"><em>*</em>City</label>
                        <div class="input-box">
                            <input type="text" title="City" name="billing[city]" value="123" class="input-text  required-entry" id="billing:city" />
                        </div>
                    </div>
                    <div class="field">
                        <label for="billing:region_id" class="required"><em>*</em>State/Province</label>
                        <div class="input-box">
                            <select id="billing:region_id" name="billing[region_id]" title="State/Province" class="validate-select" style="display:none;">
                                <option value="">Please select region, state or province</option>
                            </select>
                            <script type="text/javascript">
                            //<![CDATA[
                                $('billing:region_id').setAttribute('defaultValue',  "");
                            //]]>
                            </script>
                            <input type="text" id="billing:region" name="billing[region]" value=""  title="State/Province" class="input-text " style="display:none;" />
                        </div>
                    </div>
                </li>
                <li class="fields">
                    <div class="field">
                        <label for="billing:postcode" class="required"><em>*</em>Zip/Postal Code</label>
                        <div class="input-box">
                            <input type="text" title="Zip/Postal Code" name="billing[postcode]" id="billing:postcode" value="123" class="input-text validate-zip-international  required-entry" />
                        </div>
                    </div>
                    <div class="field">
                        <label for="billing:country_id" class="required"><em>*</em>Country</label>
                        <div class="input-box">
                            <select name="billing[country_id]" id="billing:country_id" class="validate-select" title="Country" ><option value="" > </option><option value="SG" selected="selected" >Singapore</option></select>                        </div>
                    </div>
                </li>
                <li class="fields">
                    <div class="field">
                        <label for="billing:telephone" class="required"><em>*</em>Telephone</label>
                        <div class="input-box">
                            <input type="text" name="billing[telephone]" value="12312" title="Telephone" class="input-text  required-entry" id="billing:telephone" />
                        </div>
                    </div>
                    <div class="field">
                        <label for="billing:fax">Fax</label>
                        <div class="input-box">
                            <input type="text" name="billing[fax]" value="" title="Fax" class="input-text " id="billing:fax" />
                        </div>
                    </div>
                </li>
                                                    <li class="no-display"><input type="hidden" name="billing[save_in_address_book]" value="1" /></li>
                                            </ul>
            <div id="window-overlay" class="window-overlay" style="display:none;"></div>
<div id="remember-me-popup" class="remember-me-popup" style="display:none;">
    <div class="remember-me-popup-head">
        <h3>What's this?</h3>
        <a href="#" class="remember-me-popup-close" title="Close">Close</a>
    </div>
    <div class="remember-me-popup-body">
        <p>Checking &quot;Remember Me&quot; will let you access your shopping cart on this computer when you are logged out</p>
        <div class="remember-me-popup-close-button a-right">
            <a href="#" class="remember-me-popup-close button" title="Close"><span>Close</span></a>
        </div>
    </div>
</div>
<script type="text/javascript">
//<![CDATA[
    function toggleRememberMepopup(event){
        if($('remember-me-popup')){
            var viewportHeight = document.viewport.getHeight(),
                docHeight      = $$('body')[0].getHeight(),
                height         = docHeight > viewportHeight ? docHeight : viewportHeight;
            $('remember-me-popup').toggle();
            $('window-overlay').setStyle({ height: height + 'px' }).toggle();
        }
        Event.stop(event);
    }

    document.observe("dom:loaded", function() {
        new Insertion.Bottom($$('body')[0], $('window-overlay'));
        new Insertion.Bottom($$('body')[0], $('remember-me-popup'));

        $$('.remember-me-popup-close').each(function(element){
            Event.observe(element, 'click', toggleRememberMepopup);
        })
        $$('#remember-me-box a').each(function(element) {
            Event.observe(element, 'click', toggleRememberMepopup);
        });
    });
//]]>
</script>
        </fieldset>
     </li>
            <li class="control">
            <input type="radio" name="billing[use_for_shipping]" id="billing:use_for_shipping_yes" value="1" checked="checked" title="Ship to this address" onclick="$('shipping:same_as_billing').checked = true;" class="radio" /><label for="billing:use_for_shipping_yes" class="i-icoRadio"></label><label for="billing:use_for_shipping_yes">Deliver to this address</label></li>
        <li class="control">
            <input type="radio" name="billing[use_for_shipping]" id="billing:use_for_shipping_no" value="0" title="Ship to different address" onclick="$('shipping:same_as_billing').checked = false;" class="radio" /><label for="billing:use_for_shipping_no" class="i-icoRadio"></label><label for="billing:use_for_shipping_no">Deliver to a different address</label>
        </li>
        </ul>
        <div class="buttons-set" id="billing-buttons-container">
        <p class="required">* Required Fields</p>
        <button type="button" title="Continue" class="product-shop-add" onclick="billing.save()"><span><span>Continue</span></span></button>
        <span class="please-wait" id="billing-please-wait" style="display:none;">
            
        </span>
    </div>
</fieldset>
</form>
<script type="text/javascript">
//<![CDATA[
    var billing = new Billing('co-billing-form', 'https://www.castlery.com/checkout/onepage/getAddress/address/', 'https://www.castlery.com/checkout/onepage/saveBilling/');
    var billingForm = new VarienForm('co-billing-form');

    //billingForm.setElementsRelation('billing:country_id', 'billing:region', 'https://www.castlery.com/directory/json/childRegion/', 'Select State/Province...');
    $('billing-address-select') && billing.newAddress(!$('billing-address-select').value);

    var billingRegionUpdater = new RegionUpdater('billing:country_id', 'billing:region', 'billing:region_id', {"config":{"show_all_regions":true,"regions_required":["AT","CA","EE","FI","FR","DE","LV","LT","RO","ES","CH","US"]}}, undefined, 'billing:postcode');
    if ($('onepage-guest-register-button')) {
        Event.observe($('onepage-guest-register-button'), 'click', function(event) {
            var billingRememberMe = $('co-billing-form').select('#remember-me-box');
            if (billingRememberMe.length > 0) {
                if ($('login:guest') && $('login:guest').checked) {
                    billingRememberMe[0].hide();
                } else if ($('login:register') && ($('login:register').checked || $('login:register').type == 'hidden')) {
                    billingRememberMe[0].show();
                }
            }
        });
    }
//]]>
</script>
        </div>
    </li>
    <li id="opc-shipping" class="section">
        <div class="step-title">
            <span class="number">2.</span>
            <h2>Shipping Information</h2>
            <a href="javascript:;">Edit</a>
        </div>
        <div id="checkout-step-shipping" class="step a-item" style="display:none;">
            <form action="" id="co-shipping-form">
    <ul class="form-list">
                <li id="shipping-new-address-form">
            <fieldset>
                <input type="hidden" name="shipping[address_id]" value="125799" id="shipping:address_id" />
                <ul>
                    <li class="fields"><div class="customer-name">
    <div class="field name-firstname">
        <label for="shipping:firstname" class="required"><em>*</em>First Name</label>
        <div class="input-box">
            <input type="text" id="shipping:firstname" name="shipping[firstname]" value="Chien" title="First Name" maxlength="255" class="input-text required-entry" onchange="shipping.setSameAsBilling(false)" />
        </div>
    </div>
    <div class="field name-lastname">
        <label for="shipping:lastname" class="required"><em>*</em>Last Name</label>
        <div class="input-box">
            <input type="text" id="shipping:lastname" name="shipping[lastname]" value="Nguyen Duc" title="Last Name" maxlength="255" class="input-text required-entry" onchange="shipping.setSameAsBilling(false)" />
        </div>
    </div>
</div>
</li>
                    <li class="fields">
                        <div class="fields">
                            <label for="shipping:company">Company</label>
                            <div class="input-box">
                                <input type="text" id="shipping:company" name="shipping[company]" value="mor" title="Company" class="input-text " onchange="shipping.setSameAsBilling(false);" />
                            </div>
                        </div>
                    </li>
                                        <li class="wide">
                        <label for="shipping:street1" class="required"><em>*</em>Address</label>
                        <div class="input-box input-box-inline clearfix">
                            <input type="text" title="Street Address" name="shipping[street][]" id="shipping:street1" value="123" class="input-text  required-entry" onchange="shipping.setSameAsBilling(false);" />
                        </div>
                    </li>
                                                                <li class="wide">
                            <div class="input-box">
                                <input type="text" title="Street Address 2" name="shipping[street][]" id="shipping:street2" value="" class="input-text " onchange="shipping.setSameAsBilling(false);" />
                            </div>
                        </li>
                                                            <li class="fields">
                        <div class="field">
                            <label for="shipping:city" class="required"><em>*</em>City</label>
                            <div class="input-box">
                                <input type="text" title="City" name="shipping[city]" value="123" class="input-text  required-entry" id="shipping:city" onchange="shipping.setSameAsBilling(false);" />
                            </div>
                        </div>
                        <div class="field">
                            <label for="shipping:region" class="required"><em>*</em>State/Province</label>
                            <div class="input-box">
                                <select id="shipping:region_id" name="shipping[region_id]" title="State/Province" class="validate-select" style="display:none;">
                                    <option value="">Please select region, state or province</option>
                                </select>
                                <script type="text/javascript">
                                    //<![CDATA[
                                    $('shipping:region_id').setAttribute('defaultValue',  "");
                                    //]]>
                                </script>
                                <input type="text" id="shipping:region" name="shipping[region]" value="" title="State/Province" class="input-text " style="display:none;" />
                            </div>
                        </div>
                    </li>
                    <li class="fields">
                        <div class="field">
                            <label for="shipping:postcode" class="required"><em>*</em>Zip/Postal Code</label>
                            <div class="input-box">
                                <input type="text" title="Zip/Postal Code" name="shipping[postcode]" id="shipping:postcode" value="123" class="input-text validate-zip-international  required-entry" onchange="shipping.setSameAsBilling(false);" />
                            </div>
                        </div>
                        <div class="field">
                            <label for="shipping:country_id" class="required"><em>*</em>Country</label>
                            <div class="input-box">
                                <select name="shipping[country_id]" id="shipping:country_id" class="validate-select" title="Country" onchange="if(window.shipping)shipping.setSameAsBilling(false);"><option value="" > </option><option value="SG" selected="selected" >Singapore</option></select>                            </div>
                        </div>
                    </li>
                    <li class="fields">
                        <div class="field">
                            <label for="shipping:telephone" class="required"><em>*</em>Mobile</label>
                            <div class="input-box">
                                <input type="text" name="shipping[telephone]" value="12312" title="Telephone" class="input-text  required-entry" id="shipping:telephone" onchange="shipping.setSameAsBilling(false);" />
                            </div>
                        </div>
                        <div class="field">
                            <label for="shipping:fax">Alternative Contact No.</label>
                            <div class="input-box">
                                <input type="text" name="shipping[fax]" value="" title="Fax" class="input-text " id="shipping:fax" onchange="shipping.setSameAsBilling(false);" />
                            </div>
                        </div>
                    </li>
                                            <li class="no-display"><input type="hidden" name="shipping[save_in_address_book]" value="1" /></li>
                                    </ul>
            </fieldset>
        </li>
        <fieldset>
        <li class="control checkboxTick">
            <input type="checkbox" name="shipping[same_as_billing]" id="shipping:same_as_billing" value="1" checked="checked" title="Use Billing Address" onclick="shipping.setSameAsBilling(this.checked)" class="checkbox" /><label for="shipping:same_as_billing" class="i-icoCheck"></label><label for="shipping:same_as_billing">Use Billing Address</label>
        </li>
        </fieldset>
    </ul>
    <div class="buttons-set" id="shipping-buttons-container">
        <p class="required">* Required Fields</p>
        <p class="back-link"><a href="#" onclick="checkout.back(); return false;"><small>&laquo; </small>Back</a></p>
        <button type="button" class="product-shop-add" title="Continue" onclick="shipping.save()"><span><span>Continue</span></span></button>
        <span id="shipping-please-wait" class="please-wait" style="display:none;">

        </span>
    </div>
</form>
<script type="text/javascript">
    //<![CDATA[
    var shipping = new Shipping('co-shipping-form', 'https://www.castlery.com/checkout/onepage/getAddress/address/', 'https://www.castlery.com/checkout/onepage/saveShipping/',
        'https://www.castlery.com/checkout/onepage/shippingMethod/');
    var shippingForm = new VarienForm('co-shipping-form');
    shippingForm.extraChildParams = ' onchange="shipping.setSameAsBilling(false);"';
    //shippingForm.setElementsRelation('shipping:country_id', 'shipping:region', 'https://www.castlery.com/directory/json/childRegion/', 'Select State/Province...');
    $('shipping-address-select') && shipping.newAddress(!$('shipping-address-select').value);

    var shippingRegionUpdater = new RegionUpdater('shipping:country_id', 'shipping:region', 'shipping:region_id', {"config":{"show_all_regions":true,"regions_required":["AT","CA","EE","FI","FR","DE","LV","LT","RO","ES","CH","US"]}}, undefined, 'shipping:postcode');
    //]]>
</script>
        </div>
    </li>
    <li id="opc-shipping_method" class="section">
        <div class="step-title">
            <span class="number">3.</span>
            <h2>Shipping Method</h2>
            <a href="javascript:;">Edit</a>
        </div>
        <div id="checkout-step-shipping_method" class="step a-item" style="display:none;">
            <form id="co-shipping-method-form" action="">
    <div id="checkout-shipping-method-load">
        <!-- Content loaded dynamically -->
    </div>
    <script type="text/javascript">
        //<![CDATA[
        var shippingMethod = new ShippingMethod('co-shipping-method-form', "https://www.castlery.com/checkout/onepage/saveShippingMethod/");
        //]]>
    </script>
    <div id="onepage-checkout-shipping-method-additional-load">
            <script type="text/javascript">
//<![CDATA[
if(!window.toogleVisibilityOnObjects) {
    var toogleVisibilityOnObjects = function(source, objects) {
        if($(source) && $(source).checked) {
            objects.each(function(item){
                $(item).show();
                $$('#' + item + ' .input-text').each(function(item) {
                    item.removeClassName('validation-passed');
                });
            });
        } else {
            objects.each(function(item){
                if ($(item)) {
                    $(item).hide();
                    $$('#' + item + ' .input-text').each(function(sitem) {
                        sitem.addClassName('validation-passed');
                    });
                    $$('#' + item + ' .giftmessage-area').each(function(sitem) {
                        sitem.value = '';
                    });
                    $$('#' + item + ' .checkbox').each(function(sitem) {
                        sitem.checked = false;
                    });
                    $$('#' + item + ' .select').each(function(sitem) {
                        sitem.value = '';
                    });
                    $$('#' + item + ' .price-box').each(function(sitem) {
                        sitem.addClassName('no-display');
                    });
                }
            });
        }
    }
}

if(!window.toogleRequired) {
    var toogleRequired = function (source, objects)
    {
        if(!$(source).value.blank()) {
            objects.each(function(item) {
               $(item).addClassName('required-entry');
            });
        } else {
            objects.each(function(item) {
                if (typeof shippingMethod != 'undefined' && shippingMethod.validator) {
                   shippingMethod.validator.reset(item);
                }
                $(item).removeClassName('required-entry');
            });

        }
    }
}
if(window.shipping) {

shipping.onSave = function(evt){
    new Ajax.Updater('onepage-checkout-shipping-method-additional-load', 'https://www.castlery.com/checkout/onepage/getAdditional/', {onSuccess: function() {
          this.nextStep(evt);
    }.bind(this), evalScripts:true});
}.bindAsEventListener(shipping);

billing.onSave = function(evt){
    new Ajax.Updater('onepage-checkout-shipping-method-additional-load', 'https://www.castlery.com/checkout/onepage/getAdditional/', {onSuccess: function() {
          this.nextStep(evt);
    }.bind(this), evalScripts:true});
}.bindAsEventListener(billing);

}
//]]>
</script>
    </div>
    <div class="buttons-set" id="shipping-method-buttons-container">
        <p class="back-link"><a href="#" onclick="checkout.back(); return false;"><small>&laquo; </small>Back</a></p>
        <button type="button" class="product-shop-add" onclick="shippingMethod.save()"><span><span>Continue</span></span></button>
        <span id="shipping-method-please-wait" class="please-wait" style="display:none;">
            
        </span>
    </div>
</form>
        </div>
    </li>
    <li id="opc-payment" class="section">
        <div class="step-title">
            <span class="number">4.</span>
            <h2>Payment Information</h2>
            <a href="javascript:;">Edit</a>
        </div>
        <div id="checkout-step-payment" class="step a-item" style="display:none;">
            <script type="text/javascript">
//<![CDATA[
    var quoteBaseGrandTotal = 1807;
    var checkQuoteBaseGrandTotal = quoteBaseGrandTotal;
    var payment = new Payment('co-payment-form', 'https://www.castlery.com/checkout/onepage/savePayment/');
    var lastPrice;
//]]>
</script>
<form action="" id="co-payment-form">
    <fieldset>
        <dl class="sp-methods" id="checkout-payment-method-load">
   <!-- Content dynamically loaded. Content from the methods.phtml is loaded during the ajax call -->
</dl>
    </fieldset>
</form>
<div class="tool-tip" id="payment-tool-tip" style="display:none;">
    <div class="btn-close"><a href="#" id="payment-tool-tip-close" title="Close">Close</a></div>
    <div class="tool-tip-content"><img src="https://www.castlery.com/skin/frontend/castlery/default/images/cvv.gif" alt="Card Verification Number Visual Reference" title="Card Verification Number Visual Reference" /></div>
</div>
<div class="buttons-set" id="payment-buttons-container">
    <p class="required">* Required Fields</p>
    <p class="back-link"><a href="#" onclick="checkout.back(); return false;"><small>&laquo; </small>Back</a></p>
    <button type="button" class="product-shop-add" onclick="payment.save()"><span><span>Continue</span></span></button>
    <span class="please-wait" id="payment-please-wait" style="display:none;">
        
    </span>
</div>
<script type="text/javascript">
//<![CDATA[
    function toggleToolTip(event){
        if($('payment-tool-tip')){
            $('payment-tool-tip').setStyle({
                top: (Event.pointerY(event)-560)+'px'//,
                //left: (Event.pointerX(event)+100)+'px'
            })
            $('payment-tool-tip').toggle();
        }
        Event.stop(event);
    }
    if($('payment-tool-tip-close')){
        Event.observe($('payment-tool-tip-close'), 'click', toggleToolTip);
    }
//]]>
</script>
<script type="text/javascript">
//<![CDATA[
    payment.currentMethod = "banktransfer";
//]]>
</script>
        </div>
    </li>
    <li id="opc-review" class="section">
        <div class="step-title">
            <span class="number">5.</span>
            <h2>Order Review</h2>
            <a href="javascript:;">Edit</a>
        </div>
        <div id="checkout-step-review" class="step a-item" style="display:none;">
            <div class="order-review" id="checkout-review-load">
    <!-- Content loaded dynamically -->
</div>
        </div>
    </li>
</ol>
<script type="text/javascript">
//<![CDATA[
    var accordion = new Accordion('checkoutSteps', '.step-title', true);
        accordion.openSection('opc-billing');
        var checkout = new Checkout(accordion,{
        progress: 'https://www.castlery.com/checkout/onepage/progress/',
        review: 'https://www.castlery.com/checkout/onepage/review/',
        saveMethod: 'https://www.castlery.com/checkout/onepage/saveMethod/',
        failure: 'https://www.castlery.com/checkout/cart/'}
    );
//]]>
</script>

                                </div>
                                <div class="col-right sidebar cart-collaterals col-lg-3 col-md-3 col-sm-12 col-xs-12"><div id="checkout-progress-wrapper"><div class="block block-progress opc-block-progress">
    <!-- <div class="block-title">
        <strong><span>Your Checkout Progress</span></strong>
    </div> -->
    <div class="block-content sticky-block-content">
        <div class="page-title title-buttons">
            <h1>Your Checkout</h1>
        </div>
        <div class="totals">
            <div class="totals-price">
                    <table id="shopping-cart-totals-table">

        <col />
        <col width="1" />
        <tfoot>
            <!-- <tr>
    <td style="" class="a-right" colspan="1">
        <strong>Grand Total Excl. GST</strong>
    </td>
    <td style="" class="a-right">
        <strong><span class="price">$1,688.79</span></strong>
    </td>
</tr> -->
<tr >
    <td style="" class="a-right" colspan="1">
                    GST            </td>
    <td style="" class="a-right"><span class="price">$118.21</span></td>
</tr>
<tr>
    <td style="" class="a-right" colspan="1">
        <strong>Total (Incl. GST)</strong>
    </td>
    <td style="" class="a-right">
        <strong><span class="price">$1,807</span></strong>
    </td>
</tr>
        </tfoot>
        <tbody>
            <tr>
    <td style="" class="a-right" colspan="1">
        Subtotal    </td>
    <td style="" class="a-right">
        <span class="price">$1,735.51</span>    </td>
</tr>
<tr>
    <td colspan="1" style="" class="a-right">
                    Discount (Anniversary Rebate, Free Doormat)            </td>
    <td style="" class="a-right">
                    <span class="price">-$50</span>            </td>
</tr>
<tr>
    <td style="" class="a-right" colspan="1">
        Delivery Fee    </td>

                <td style=" color: #d23b3f; font-weight: bold;" class="a-right">
            FREE        </td>
    </tr>
        </tbody>
    </table>
            </div>
        </div>
        <div>
            <div class="cart-helo-desk">
                <h2>Need Help?</h2>
                <p>+65 6744 5333</p>
                <p>Line open: Mon - Fri, 9:30am - 6:30pm</p>
            </div>
    <!--        <div class="cart-time">Your cart will expire in: 15 mins 0s</div>-->
        </div>
    </div>
</div></div></div>
                            </div>
                            <div class="checkout-bottom">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                <strong>Need any help on checkout?</strong>
                <p>Call us: +65 67445333 <br />Mon - Fri: 9:30am - 6pm</p>
                <p>Or you can <a href="#" onclick="LC_API.open_chat_window();return false;">chat with us</a> online.</p>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                <strong>promised delivery on time</strong>
                <p>It's highest priority to deliver the items to you on time, fuss free. Please contact us if you need to change your  delivery schedule.</p>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                <strong>not happy with your purchase?</strong>
                <p>We want all our products to end up in happy homes. If you don't absolutely love your order, please contact us for a return or an exchange.</p>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                <strong>this payment is secure</strong>
                <p>Security for your online payment is extremely important to us. Don't worry, you are protected by the leading secure socket layer (SSL) authority.</p>
            </div>
        </div>
    </div>
</div>                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                                

    <!-- LiveChat Script Start -->
    <script type="text/javascript">
        var __lc = {};
        __lc.license = 6345131;

        (function() {
            var lc = document.createElement('script'); lc.type = 'text/javascript'; lc.async = true;
            lc.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn.livechatinc.com/tracking.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(lc, s);
        })();
    </script>
    <!-- LiveChat Script End -->
<div id ="ajaxconfig_info" style ="display:none">
<a href ="https://www.castlery.com/"></a>
<div ><img src ="https://www.castlery.com/media/theme/default/loader_2.gif" alt ="Loading Image" /></div>
<button name ="#000000" value ="0.3" ></button>
<input type="hidden" value ="1"/>
<input type="hidden" id="enable_module" value ="1"/>
<input class="effect_to_cart" type="hidden" value ="0"/>
<input class="title_shopping_cart" type="hidden" value ="Go to shopping cart"/>
<input class="title_shopping_continue" type="hidden" value ="Shop more design"/>
<input class="title_shopping_wishlist" type="hidden" value ="Go to wishlist"/>
<input class="title_shopping_compare" type="hidden" value ="Go to list Compare"/>
<input class="confirm_delete_product" type="hidden" value ="Are you sure you would like to remove this item ?"/>
<input class="title_add_to_cart" type="hidden" value ="Item was successfully added to your cart"/>
<input class="title_add_to_wishlist" type="hidden" value ="Item was successfully added to your wishlist"/>
<input class="title_add_to_compare" type="hidden" value ="Item was successfully added to your compare"/>
<input class="using_ssl" type="hidden" value ="0"/>


</div>
<div id="ajaxcart-checkout-content" style="display:none;"></div>
<div id ="productHaveOption"  style="display:block;" ></div>    <script  type="text/javascript">
	 $jq(document).ready(function() {
		if(!CSLR.is_loggedin && Cookies.get("shownewsletter") != 1){
            $jq('#newsletter-modal').modal();
            Cookies.set('shownewsletter','1',{ expires: 7});
        }
        $jq( "#newsletter-modal form" ).submit(function( event ) {
            var email = $jq('#newsletter_subscribe').val();
            var testEmail = /^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i;
            if (testEmail.test(email)){
                return true;
            }
            else{
                $jq('#newsletter_subscribe').addClass('validation-failed');
                $jq('#advice-required-entry-newsletter').show();
                return false;
            }
        });
	 });
</script>
<!-- Element to pop up -->
<div class="modal fade newsletter-subscribe" id="newsletter-modal" tabindex="-1" role="dialog" aria-labelledby="newsletter-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-home modal-dialog-center">
        <div class="modal-content">
            <a href="javascript:;" type="button" class="i-icoCloseBlack" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"></span></a>
            <div class="modal-dialog-home-body clearfix">
                <div class="modal-dialog-home-body-sign">
                    <img src="https://www.castlery.com/skin/frontend/castlery/default/images/sample/header.jpg" />
                    <h2>$25 Off </h2>
                    <h3>-WELCOME GIFT-</h3>
                    <P>Sign up and be an insider. Receive all our latest deals, events, design tips and get a free $25 voucher.</P>
                    <form action="https://www.castlery.com/newsletter/subscriber/new/" method="post" id="newsletter-validate">
                        <ul class="newsletter-signup-form">
                            <li><input type="text" name="email" id="newsletter_subscribe" placeholder="Enter your email" class="input-text required-entry validate-email" /></li>
                            <div style="" id="advice-required-entry-newsletter" class="validation-advice">This is a required field.</div>
                            <li><button type="submit" title="Subscribe" class="button_subscribe">Sign up</button></li>
                        </ul>
                        <a href="#" data-dismiss="modal" aria-label="Close"><strong>No, I don’t like discounts.</strong></a>
                    </form>
                    <script type="text/javascript">
                        //<![CDATA[
                        var newsletterSubscriberFormDetail = new VarienForm('newsletter-validate');
                        //]]>
                    </script>
                </div>
                <div class="modal-dialog-home-body-img"></div>
            </div>
        </div>
    </div>
</div>


<script>var FEED_BASE_URL="https://www.castlery.com/";</script><script src="https://www.castlery.com/js/mirasvit/code/feedexport/performance.js" type="text/javascript"></script><script type="text/javascript">
    //<![CDATA[
    Mage.Cookies.set(
        'PAGECACHE_ENV',
            'a918f36dbc710e6b63bd5168d1b7660f',
        new Date(new Date().getTime() + 86400 * 1000)
        );
    //]]>
</script>
<script type="text/javascript">
    if (document.cookie.length && (document.cookie.indexOf('PAGECACHE_FORMKEY=') == -1)) {
        Mage.Cookies.set(
            'PAGECACHE_FORMKEY',
            'i9IvrzUaeBMhAD5b',
            new Date(new Date().getTime() + 86400000)
        );
    }
</script>
<script type="text/javascript">

    // Only init the vzero class once
    if(vzero === undefined) {

        // Pass some data over to vZero integration JS
        var vzero = new vZero(
            'gene_braintree_creditcard',
            'eyJ2ZXJzaW9uIjoyLCJhdXRob3JpemF0aW9uRmluZ2VycHJpbnQiOiJjMTE1ZTVlNWM0ZGRjNzFlMzYxMzg2OTIxZDcxZDNhZWI5ZjE5YzM1ZTJjNTVkYzRkNTY0MzQ2YjMyYmMxZGZjfGNyZWF0ZWRfYXQ9MjAxNi0xMC0yMVQxNTowNDoxMy4zNDk1MTQ1NjgrMDAwMFx1MDAyNm1lcmNoYW50X2FjY291bnRfaWQ9Y2FzdGxlcnlTR0RcdTAwMjZtZXJjaGFudF9pZD16OTN4eWNjYjRxN3hmeWhoXHUwMDI2cHVibGljX2tleT15djlybjZyZjYzeTNyZmZyIiwiY29uZmlnVXJsIjoiaHR0cHM6Ly9hcGkuYnJhaW50cmVlZ2F0ZXdheS5jb206NDQzL21lcmNoYW50cy96OTN4eWNjYjRxN3hmeWhoL2NsaWVudF9hcGkvdjEvY29uZmlndXJhdGlvbiIsImNoYWxsZW5nZXMiOltdLCJlbnZpcm9ubWVudCI6InByb2R1Y3Rpb24iLCJjbGllbnRBcGlVcmwiOiJodHRwczovL2FwaS5icmFpbnRyZWVnYXRld2F5LmNvbTo0NDMvbWVyY2hhbnRzL3o5M3h5Y2NiNHE3eGZ5aGgvY2xpZW50X2FwaSIsImFzc2V0c1VybCI6Imh0dHBzOi8vYXNzZXRzLmJyYWludHJlZWdhdGV3YXkuY29tIiwiYXV0aFVybCI6Imh0dHBzOi8vYXV0aC52ZW5tby5jb20iLCJhbmFseXRpY3MiOnsidXJsIjoiaHR0cHM6Ly9jbGllbnQtYW5hbHl0aWNzLmJyYWludHJlZWdhdGV3YXkuY29tL3o5M3h5Y2NiNHE3eGZ5aGgifSwidGhyZWVEU2VjdXJlRW5hYmxlZCI6ZmFsc2UsInBheXBhbEVuYWJsZWQiOnRydWUsInBheXBhbCI6eyJkaXNwbGF5TmFtZSI6IkNhc3RsZXJ5IiwiY2xpZW50SWQiOiJBYlJTS2RCamVmcjVJdlZsdWhUWGNCa0h4dzhqanZaRlVZc0pBb0cyUjVQaFlWRkFiZElSbXVWdWNrZ1FUcDJWN1VrZm93LVhobzZHdnNlWCIsInByaXZhY3lVcmwiOiJodHRwczovL3d3dy5jYXN0bGVyeS5jb20vcHJpdmFjeS1wb2xpY3kiLCJ1c2VyQWdyZWVtZW50VXJsIjoiaHR0cHM6Ly93d3cuY2FzdGxlcnkuY29tL3Rlcm1zLWFuZC1jb25kaXRpb25zIiwiYmFzZVVybCI6Imh0dHBzOi8vYXNzZXRzLmJyYWludHJlZWdhdGV3YXkuY29tIiwiYXNzZXRzVXJsIjoiaHR0cHM6Ly9jaGVja291dC5wYXlwYWwuY29tIiwiZGlyZWN0QmFzZVVybCI6bnVsbCwiYWxsb3dIdHRwIjpmYWxzZSwiZW52aXJvbm1lbnROb05ldHdvcmsiOmZhbHNlLCJlbnZpcm9ubWVudCI6ImxpdmUiLCJ1bnZldHRlZE1lcmNoYW50IjpmYWxzZSwiYnJhaW50cmVlQ2xpZW50SWQiOiJBUktyWVJEaDNBR1hEelc3c09fM2JTa3EtVTFDN0hHX3VXTkMtejU3TGpZU0ROVU9TYU90SWE5cTZWcFciLCJiaWxsaW5nQWdyZWVtZW50c0VuYWJsZWQiOnRydWUsIm1lcmNoYW50QWNjb3VudElkIjoiY2FzdGxlcnlTR0QiLCJjdXJyZW5jeUlzb0NvZGUiOiJTR0QifSwiY29pbmJhc2VFbmFibGVkIjpmYWxzZSwibWVyY2hhbnRJZCI6Ino5M3h5Y2NiNHE3eGZ5aGgiLCJ2ZW5tbyI6Im9mZiIsIm1lcmNoYW50QWNjb3VudElkIjoiY2FzdGxlcnlTR0QifQ==',
            false,
            false,
            false,
            false,
            'https://www.castlery.com/braintree/checkout/quoteTotal/',
            'https://www.castlery.com/braintree/checkout/tokenizeCard/',
            'https://www.castlery.com/braintree/checkout/vaultToNonce/'
        );

                // Pass some data through to the PayPal integration
        var vzeroPaypal = new vZeroPayPalButton(
            'eyJ2ZXJzaW9uIjoyLCJhdXRob3JpemF0aW9uRmluZ2VycHJpbnQiOiJjMTE1ZTVlNWM0ZGRjNzFlMzYxMzg2OTIxZDcxZDNhZWI5ZjE5YzM1ZTJjNTVkYzRkNTY0MzQ2YjMyYmMxZGZjfGNyZWF0ZWRfYXQ9MjAxNi0xMC0yMVQxNTowNDoxMy4zNDk1MTQ1NjgrMDAwMFx1MDAyNm1lcmNoYW50X2FjY291bnRfaWQ9Y2FzdGxlcnlTR0RcdTAwMjZtZXJjaGFudF9pZD16OTN4eWNjYjRxN3hmeWhoXHUwMDI2cHVibGljX2tleT15djlybjZyZjYzeTNyZmZyIiwiY29uZmlnVXJsIjoiaHR0cHM6Ly9hcGkuYnJhaW50cmVlZ2F0ZXdheS5jb206NDQzL21lcmNoYW50cy96OTN4eWNjYjRxN3hmeWhoL2NsaWVudF9hcGkvdjEvY29uZmlndXJhdGlvbiIsImNoYWxsZW5nZXMiOltdLCJlbnZpcm9ubWVudCI6InByb2R1Y3Rpb24iLCJjbGllbnRBcGlVcmwiOiJodHRwczovL2FwaS5icmFpbnRyZWVnYXRld2F5LmNvbTo0NDMvbWVyY2hhbnRzL3o5M3h5Y2NiNHE3eGZ5aGgvY2xpZW50X2FwaSIsImFzc2V0c1VybCI6Imh0dHBzOi8vYXNzZXRzLmJyYWludHJlZWdhdGV3YXkuY29tIiwiYXV0aFVybCI6Imh0dHBzOi8vYXV0aC52ZW5tby5jb20iLCJhbmFseXRpY3MiOnsidXJsIjoiaHR0cHM6Ly9jbGllbnQtYW5hbHl0aWNzLmJyYWludHJlZWdhdGV3YXkuY29tL3o5M3h5Y2NiNHE3eGZ5aGgifSwidGhyZWVEU2VjdXJlRW5hYmxlZCI6ZmFsc2UsInBheXBhbEVuYWJsZWQiOnRydWUsInBheXBhbCI6eyJkaXNwbGF5TmFtZSI6IkNhc3RsZXJ5IiwiY2xpZW50SWQiOiJBYlJTS2RCamVmcjVJdlZsdWhUWGNCa0h4dzhqanZaRlVZc0pBb0cyUjVQaFlWRkFiZElSbXVWdWNrZ1FUcDJWN1VrZm93LVhobzZHdnNlWCIsInByaXZhY3lVcmwiOiJodHRwczovL3d3dy5jYXN0bGVyeS5jb20vcHJpdmFjeS1wb2xpY3kiLCJ1c2VyQWdyZWVtZW50VXJsIjoiaHR0cHM6Ly93d3cuY2FzdGxlcnkuY29tL3Rlcm1zLWFuZC1jb25kaXRpb25zIiwiYmFzZVVybCI6Imh0dHBzOi8vYXNzZXRzLmJyYWludHJlZWdhdGV3YXkuY29tIiwiYXNzZXRzVXJsIjoiaHR0cHM6Ly9jaGVja291dC5wYXlwYWwuY29tIiwiZGlyZWN0QmFzZVVybCI6bnVsbCwiYWxsb3dIdHRwIjpmYWxzZSwiZW52aXJvbm1lbnROb05ldHdvcmsiOmZhbHNlLCJlbnZpcm9ubWVudCI6ImxpdmUiLCJ1bnZldHRlZE1lcmNoYW50IjpmYWxzZSwiYnJhaW50cmVlQ2xpZW50SWQiOiJBUktyWVJEaDNBR1hEelc3c09fM2JTa3EtVTFDN0hHX3VXTkMtejU3TGpZU0ROVU9TYU90SWE5cTZWcFciLCJiaWxsaW5nQWdyZWVtZW50c0VuYWJsZWQiOnRydWUsIm1lcmNoYW50QWNjb3VudElkIjoiY2FzdGxlcnlTR0QiLCJjdXJyZW5jeUlzb0NvZGUiOiJTR0QifSwiY29pbmJhc2VFbmFibGVkIjpmYWxzZSwibWVyY2hhbnRJZCI6Ino5M3h5Y2NiNHE3eGZ5aGgiLCJ2ZW5tbyI6Im9mZiIsIm1lcmNoYW50QWNjb3VudElkIjoiY2FzdGxlcnlTR0QifQ==',
            'Castlery',
            true,
            'en_gb',
            false        );
        
        // Init the environment
        vzero.init();

    }

</script>

<style type="text/css">
    #braintree-paypal-loggedin {
        display: none!important;
    }
    #braintree-paypal-loggedout {
        display: block!important;
    }
</style><!-- DEFAULT BRAINTREE SUPPORT -->
<script type="text/javascript">

    vZeroIntegration.addMethods({

        /**
         * Attach observer events for saving the payment step, alongside the review step
         */
        prepareSubmitObserver: function() {

            // Store a pointer to the vZero integration
            var vzeroIntegration = this;

            // Store the original version of Payment.save();
            var _originalPaymentSave = Payment.prototype.save;
            Payment.prototype.save = function() {

                // Do the standard validation
                var validator = new Validation(this.form);
                if (this.validate() && validator.validate() && vzeroIntegration.shouldInterceptSubmit('creditcard')) {

                    // Store a pointer to the payment class
                    var paymentThis = this;
                    var paymentArguments = arguments;

                    // If everything was a success on the checkout end, let's submit the vZero integration
                    vzeroIntegration.submit('creditcard', function () {
                        return _originalPaymentSave.apply(paymentThis, paymentArguments);
                    });

                } else {
                    // If not run the original code
                    return _originalPaymentSave.apply(this, arguments);
                }

            };

            // As the default checkout submits more data on the review step, we need to make sure various elements are disabled
            var _originalReviewSave = Review.prototype.save;
            Review.prototype.save = function() {

                // Force on device data
                vzeroIntegration.enableDeviceData();

                // If we should intercept the submit, disable the credit card form
                if (vzeroIntegration.shouldInterceptSubmit('creditcard')) {
                    vzeroIntegration.disableCreditCardForm();
                }

                // Do the original action
                var reviewResponse = _originalReviewSave.apply(this, arguments);

                // Just in case there is an error
                if (vzeroIntegration.shouldInterceptSubmit('creditcard')) {
                    vzeroIntegration.enableCreditCardForm();
                }

                return reviewResponse;
            };

        },

        /**
         * Attach an event to insert the PayPal button on the review step of the checkout
         */
        preparePaymentMethodSwitchObserver: function() {

            // Store a pointer to the vZero integration
            var vzeroIntegration = this;

            // Store a pointer to the original review step
            var _originalReviewInitialize = Review.prototype.initialize;

            // Intercept the save function
            Review.prototype.initialize = function(saveUrl, successUrl, agreementsForm) {

                // Do the original action
                var reviewResponse = _originalReviewInitialize.apply(this, arguments);

                // Run our magical function
                vzeroIntegration.updatePayPalButton();

                return reviewResponse;
            };

            // When the credit card payment methods is loaded init the hosted fields if enabled
            vZero.prototype.creditCardLoaded = function() {
                // When the credit card is loaded call the init hosted fields function
                vzeroIntegration.initHostedFields();
                vzeroIntegration.initSavedMethods();
            };
            vZero.prototype.paypalLoaded = function() {
                vzeroIntegration.initSavedMethods();
            };

        }

    });

    /**
     * Start a new instance of our integration
     *
     * @type {vZeroIntegration}
     */
    new vZeroIntegration(
        (window.vzero || false),
        (window.vzeroPaypal || false),
        '<div id="paypal-complete"><div id="paypal-container"></div></div>',
        '#review-buttons-container button'
    );

</script>
<style type="text/css">
    #paypal-complete{
        min-width: 150px;
    }
    #paypal-label {
        line-height: 44px;
        float: left;
        margin-right: 12px;
        width: 149px;
    }
    #braintree-paypal-button {
        line-height: initial;
        padding: 0;
        float: left;
    }
    #braintree-paypal-loggedin {
        display: none!important;
    }
    #braintree-paypal-loggedout {
        display: block!important;
    }
</style><script src="https://js.braintreegateway.com/v1/braintree-data.js"></script>
<script type="text/javascript">

    // Only include the setup call once
    if(braintreeDataEnv === undefined) {

                var braintreeDataEnv = BraintreeData.environments.production;
                BraintreeData.setup("z93xyccb4q7xfyhh", 'co-payment-form', braintreeDataEnv);

        // Update the device_data's field name to contain payment
        if ($('device_data')) {
            $('device_data').setAttribute('name', 'payment[device_data]');
        }
    }
</script>


    </div>
</div>
</body>
</html>
